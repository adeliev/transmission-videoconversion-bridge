#!/bin/bash

# === monitor.sh: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á ===
# –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç

LOGFILE="/logs/monitor.log"

log() {
    echo "$(date '+%Y-%m-%d %H:%M:%S') - $1" >> "$LOGFILE"
}

log "üöÄ –ú–æ–Ω–∏—Ç–æ—Ä –∑–∞–ø—É—â–µ–Ω."

while true; do
    log "‚è∞ –ó–∞–ø—É—Å–∫ –ø–ª–∞–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á..."

    # 1. –ó–∞–ø—É—Å–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
    /scripts/convert.sh

    # 2. –ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
    /scripts/rename.sh

    # 3. –ó–∞–ø—É—Å–∫ —Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (TMDB)
    /scripts/tag.sh
    
    log "üí§ –û–∂–∏–¥–∞–Ω–∏–µ 30 –º–∏–Ω—É—Ç..."
    sleep 1800
done
